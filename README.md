# Космический Телеграм.
#
##### Скачивает картинки с сайтов NASA и SpaceX. Выгружает скачанные картинки в телеграмм канал.
Принимает на вход командной строки промежурок времени (секунды), через который будет выгружаться одна картинка с папки ``\image`` в группу или канал, ID которого указан в папке `.env`.
Eсли программе не задавать начальный параметр, то картинки будут выгружаться каждые 4 часа (14400 секунд)
Пример ввода: 
```
..\API_Space>python3 telegram_bot.py -d 10
```
*Загружает картинку раз в 10 секунд.*
```
..\API_Space>python3 telegram_bot.py
```
*Загружает картинку раз в 14400 секунд.*

Перехватывает ошибки `requests.ConnectionError` и `telegram.error.NetworkError` при сбоях в интернет-соединении и запускает код снова.
___
Для остановки работы кода ввести:
``Ctrl+C``
___
Загружает в папку ``\image`` картинки [NASA EPIC](https://api.nasa.gov/) с сайта. Значение по умолчанию 5.
Пример ввода:
```
..\API_Space>python3 fetch_nasas_epic.py
```
Можно указать колличество скачиваемых картинок следующим образом:
```
..\API_Space>python3 fetch_nasas_epic.py -d 10 
```
*Скачивает 10 картинок.*
___
Загружает в папку ``\image`` картинки [NASA APOD](https://api.nasa.gov/) с сайта.
На данный сайт каждый день закружается по одной картинке от NASA. 
По умолчанию скачивает картинки начиная с `2022-08-28` по сегодняшнюю дату. 
```
..\API_Space>python3 fetch_nasas_images.py
```
Для указания другой даты скачивания вводим в формате [year]-[month]-[day] следующим образом:
```
..\API_Space>python3 fetch_spacex_images.py -d 22-08-05
```
___
Загружает в папку ``\image`` картинки с последнего запуска с сайта [API SpaceX]('https://api.spacexdata.com/v5/launches/latest'). В случае, если нету картинок в последнем запуске - завершает программу без загрузки.
```
..\API_Space>python3 fetch_spacex_images.py
```
Каждый запуск имеет свой ID. Для указания ID определённого запуска вводим как указано на примере:
```
..\API_Space>python3 fetch_spacex_images.py -d 5eb87d47ffd86e000604b38a
```
Список несколькольких вариантов запусков, в которых имеются картинки:
```
5a9fc479ab70786ba5a1eaaa
5eb87d47ffd86e000604b38a
5e9e3032383ecb267a34e7c7
```

### Как установить 

Для скачивания картинок с сайта NASA необходим NASA_TOKEN. 
Получаем его на сайте [{ NASA APIs }](https://api.nasa.gov/). 
Пример:
```
NASA_TOKEN='mlafKIH1LG1N5BxRlz4lY1OWaEelQVgIvpVkygBB'
```
Программы **fetch_nasas_images.py** и **fetch_nasas_epic.py** запрашивают призапуске программы. программы.
___
Для загрузки картинок на телеграмм канал необходим TG_TOKEN и TG_CHAT_ID.
Получаем ТОКЕН в телеграмме у *@BotFather*.
Пример ТОКЕНа:
```
TG_TOKEN='5770283337:AAEa868qn7PkD-vx4Dp75mmzPGxvtovcR1g'
```
Получаем ID телеграмм бота в телеграмме у *@getmyid_bot* или указываем ссылку на свой телеграмм канал.
Пример ID: 
```
TG_CHAT_ID="@devman_space_images"
```
Программа **telegram_bot.py** запрашивает TG_TOKEN и TG_CHAT_ID при запуске.
Так же есть возможность внести значения NASA_TOKEN, TG_TOKEN и TG_CHAT_ID в файл `.env` для запуска программы без их ввода.

Python3 должен быть уже установлен. 
Затем используйте `pip` (или `pip3`, есть конфликт с Python2) для установки зависимостей:
```
pip install -r requirements.txt
```

### Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).